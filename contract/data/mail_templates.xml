<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <record id="mail_template_email_contract_link" model="mail.template">
      <field name="name">Contract Signing Link</field>
      <field name="model_id" ref="sale.model_sale_order"/>
      <field name="subject">Firma de contrato - enlace de firma</field>
      <field name="email_to">${object.partner_id.email or ''}</field>
      <field name="body_html" type="html">
        <table role="presentation" cellpadding="0" cellspacing="0" width="100%"
          style="box-sizing:border-box;background:#F3F5F7;margin:0;padding:24px 0;font-family:Verdana,Arial,sans-serif;color:#2E3133;border-collapse:separate;">
          <tbody>
            <tr>
              <td align="center" style="padding:0 12px;">

                <table role="presentation" cellpadding="0" cellspacing="0" width="640"
                  style="box-sizing:border-box;width:640px;max-width:640px;border-collapse:separate;color:#2E3133;font-family:Verdana,Arial,sans-serif;">

                  <tr>
                    <td style="padding:0 0 10px 0;">
                      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="border-collapse:collapse;">
                        <tr>
                          <td style="height:6px;line-height:6px;background:#0B5FFF;border-radius:14px;">&#160;</td>
                        </tr>
                      </table>
                    </td>
                  </tr>

                  <tr>
                    <td style="background:#FFFFFF;border:1px solid #E6EAEE;border-radius:14px;overflow:hidden;box-shadow:0 6px 18px #efefef;">
                      <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="border-collapse:collapse;">
                        <tbody>

                          <tr>
                            <td style="padding:18px 22px;background:#0F2D52;">
                              <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="border-collapse:collapse;">
                                <tr>
                                  <td valign="middle" width="72" style="width:72px;">
                                    <img
                                      t-att-src="ctx.get('logo_src') or ('/web/image/res.company/%s/logo' % object.company_id.id)"
                                      alt="Logo"
                                      style="display:block;width:52px;height:52px;border-radius:10px;background:#FFFFFF;padding:6px;object-fit:contain;border:0;"
                                      width="52" height="52"/>
                                  </td>

                                  <td valign="middle" style="padding-left:10px;color:#FFFFFF;">
                                    <div style="font-size:16px;font-weight:700;line-height:1.2;">
                                      <t t-out="object.company_id.name or ''"/>
                                    </div>
                                    <div style="font-size:12px;opacity:.92;line-height:1.3;margin-top:2px;">
                                      Firma de contrato • Enlace seguro
                                    </div>
                                  </td>

                                  <td align="right" valign="middle" style="color:#FFFFFF;">
                                    <div style="display:inline-block;background:#0B5FFF;color:#FFFFFF;font-size:11px;font-weight:700;padding:7px 10px;border-radius:999px;">
                                      Acción requerida
                                    </div>
                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>

                          <tr>
                            <td style="padding:22px;">

                              <div style="font-size:14px;line-height:1.7;margin:0 0 12px 0;">
                                Hola
                                <strong style="font-weight:700;">
                                  <t t-out="object.partner_id.name or 'Cliente'"/>
                                </strong>,
                              </div>

                              <div style="font-size:13px;line-height:1.7;margin:0 0 14px 0;color:#374151;">
                                Para firmar tu contrato, utiliza el siguiente enlace seguro. Este enlace es personal y está diseñado para completar la firma de manera rápida.
                              </div>

                              <table role="presentation" cellpadding="0" cellspacing="0" style="border-collapse:collapse;margin:18px 0 16px 0;">
                                <tr>
                                  <td>
                                    <a t-att-href="ctx.get('magic_url')"
                                      style="display:inline-block;background:#0B5FFF;color:#FFFFFF;text-decoration:none;font-weight:700;font-size:13px;padding:12px 16px;border-radius:10px;"
                                      target="_blank">
                                      Firmar contrato
                                    </a>
                                  </td>
                                </tr>
                              </table>

                              <table role="presentation" width="100%" cellpadding="0" cellspacing="0"
                                style="box-sizing:border-box;border-collapse:collapse;background:#F7F9FB;border:1px solid #E6EAEE;border-radius:12px;">
                                <tr>
                                  <td style="padding:14px;">
                                    <div style="font-size:12px;font-weight:700;color:#111827;margin:0 0 6px 0;">
                                      Si el botón no funciona
                                    </div>
                                    <div style="font-size:12px;line-height:1.6;color:#6B7280;margin:0 0 8px 0;">
                                      Copia y pega esta URL en tu navegador:
                                    </div>
                                    <div style="font-size:12px;line-height:1.6;color:#111827;font-weight:700;word-break:break-word;">
                                      <t t-out="ctx.get('magic_url') or ''"/>
                                    </div>
                                  </td>
                                </tr>
                              </table>

                              <div style="margin-top:14px;font-size:12px;line-height:1.7;color:#6B7280;">
                                Si tú no solicitaste este enlace, puedes ignorar este correo.
                              </div>

                            </td>
                          </tr>

                          <tr>
                            <td style="padding:16px 22px;background:#FBFCFD;border-top:1px solid #E6EAEE;">
                              <table role="presentation" width="100%" cellpadding="0" cellspacing="0" style="border-collapse:collapse;">
                                <tr>
                                  <td valign="top" style="font-size:12px;line-height:1.6;color:#5A6166;">
                                    <div style="font-weight:700;color:#111827;margin-bottom:6px;">Contacto</div>

                                    <t t-if="object.company_id.phone">
                                      Tel: <strong style="font-weight:700;"><t t-out="object.company_id.phone"/></strong><br/>
                                    </t>

                                    <t t-if="object.company_id.email">
                                      Email: <strong style="font-weight:700;"><t t-out="object.company_id.email"/></strong><br/>
                                    </t>

                                    <t t-if="object.company_id.website">
                                      Sitio:
                                      <a t-att-href="object.company_id.website"
                                         style="color:#0B5FFF;text-decoration:none;font-weight:700;">
                                        <t t-out="object.company_id.website"/>
                                      </a>
                                    </t>
                                  </td>

                                  <td align="right" valign="top" style="font-size:12px;line-height:1.6;color:#5A6166;">
                                    <div style="font-weight:700;color:#111827;margin-bottom:6px;">Atentamente,</div>
                                    <div style="color:#111827;font-weight:700;">
                                      Equipo <t t-out="object.company_id.name or ''"/>
                                    </div>
                                    <div style="margin-top:10px;font-size:11px;color:#6B7280;line-height:1.5;">
                                      Este mensaje fue generado automáticamente.<br/>
                                      Por favor no respondas a este correo.
                                    </div>
                                  </td>
                                </tr>
                              </table>
                            </td>
                          </tr>

                        </tbody>
                      </table>
                    </td>
                  </tr>

                </table>

              </td>
            </tr>
          </tbody>
        </table>
      </field>
  </record>
</odoo>
